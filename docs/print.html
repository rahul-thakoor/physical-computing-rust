<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Physical Computing with Rust</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        
        <link rel="stylesheet" href="asciinema-player.css">
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <noscript>
            <style type="text/css">
                .javascript-only {
                    display: none;
                }
            </style>
        </noscript>

    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme;
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li><a href="step_1.html"><strong aria-hidden="true">1.</strong> Physical Computing with Rust</a></li><li><a href="step_2.html"><strong aria-hidden="true">2.</strong> What you will need</a></li><li><a href="step_3.html"><strong aria-hidden="true">3.</strong> GPIO pins</a></li><li><a href="step_4.html"><strong aria-hidden="true">4.</strong> Lighting an LED</a></li><li><a href="step_5.html"><strong aria-hidden="true">5.</strong> Switching an LED on and off</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons javascript-only">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Physical Computing with Rust</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </div>
                <div id="searchresults-outer" class="searchresults-outer">
                    <div class="searchresults-header" id="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="print.html#physical-computing-with-rust" id="physical-computing-with-rust"><h1>Physical Computing with Rust</h1></a>
<a class="header" href="print.html#acknowledgement" id="acknowledgement"><h3>Acknowledgement</h3></a>
<p>This guide is based on <a href="https://projects.raspberrypi.org/en/projects/physical-computing"><em>Physical Computing with Python</em></a> by the <a href="https://www.raspberrypi.org/">Raspberry Pi Foundation</a></p>
<a class="header" href="print.html#what-you-will-do" id="what-you-will-do"><h3>What you will do</h3></a>
<p>Learn how to use the GPIO pins on your Raspberry Pi to interface with electronic components, such as LEDs and PIRs using the Rust programming language.</p>
<a class="header" href="print.html#what-you-will-learn" id="what-you-will-learn"><h3>What you will learn</h3></a>
<p>This resource covers elements from the following strands of the <a href="https://www.raspberrypi.org/curriculum/">Raspberry Pi Digital Making Curriculum</a></p>
<ul>
<li><a href="https://www.raspberrypi.org/curriculum/programming/creator">Use basic programming constructs to create simple programs</a></li>
<li><a href="https://www.raspberrypi.org/curriculum/physical-computing/creator">Use basic digital, analogue, and electromechanical components</a></li>
</ul>
<a class="header" href="print.html#what-you-already-need-to-know" id="what-you-already-need-to-know"><h3>What you already need to know</h3></a>
<ul>
<li>Basic programming concepts</li>
<li>Basic understanding of programming in Rust</li>
</ul>
<p><strong>It is highly recommended that you complete atleast the first 3 chapters of <a href="https://doc.rust-lang.org/book/second-edition/"><em>The Rust Programming Language Book</em> v2</a></strong></p>
<a class="header" href="print.html#what-you-will-need" id="what-you-will-need"><h2>What you will need</h2></a>
<a class="header" href="print.html#hardware" id="hardware"><h3>Hardware</h3></a>
<p>As well as a Raspberry Pi with an SD card and the usual peripherals, you'll also need:</p>
<table><thead><tr><th align="center">1x Solderless breadboard </th><th align="center"> Male-to-female jumper leads </th><th align="center"> Female-to-female jumper leads </th><th align="center"> Male-to-male jumper leads </th></tr></thead><tbody>
<tr><td align="center"> <img src="images/breadboard.png" alt="breadboard" /> </td><td align="center"> <img src="images/jumper-male-to-female.png" alt="m to f jumper leads" /> </td><td align="center"> <img src="images/jumper-female-to-female.png" alt="f to f jumper leads" /> </td><td align="center"> <img src="images/jumper-male-to-male.png" alt="m to m jumper leads" /> </td></tr>
</tbody></table>
<table><thead><tr><th> 1x Tactile button </th><th> 3x LEDs </th><th> Ultrasonic distance sensor</th><th> Passive infrared motion sensor </th></tr></thead><tbody>
<tr><td align="center"> <img src="images/tactile-push-button.png" alt="tactile button" /> </td><td align="center"> <img src="images/led.png" alt="LED" /> </td><td align="center"> <img src="images/ultrasonic-distance-sensor.png" alt="ultrasonic distance sensor" /> </td><td align="center"> <img src="images/pir.png" alt="PIR sensor" /> </td></tr>
</tbody></table>
<table><thead><tr><th> Light Dependent Resistor </th><th> 2x 5V Micro Metal Gearmotor </th><th> 3x 330Ω Resistor</th><th> 470Ω Resistor </th></tr></thead><tbody>
<tr><td align="center"> <img src="images/ldr.png" alt="LDR" /> </td><td align="center"> <img src="images/motor.png" alt="motor" /> </td><td align="center"> <img src="images/resistor-330r.png" alt="330 resistor" /> </td><td align="center"> <img src="images/resistor-470r.png" alt="470 resistor" /> </td></tr>
</tbody></table>
<table><thead><tr><th> 1x 1μF Capacitor </th><th> Buzzer </th><th> Motor Controller </th><th> Battery Pack </th></tr></thead><tbody>
<tr><td align="center"> <img src="images/capacitor.png" alt="capacitor" /> </td><td align="center"> <img src="images/piezo-buzzer.png" alt="buzzer" /> </td><td align="center"> <img src="images/motor-controller.png" alt="motor controller" /> </td><td align="center"> <img src="images/battery-pack.png" alt="battery pack" /> </td></tr>
</tbody></table>
<a class="header" href="print.html#software" id="software"><h3>Software</h3></a>
<p>You will need to install Rust on your Raspbery Pi.</p>
<p>Follow the steps <a href="https://doc.rust-lang.org/book/second-edition/ch01-01-installation.html#installing-rustup-on-linux-or-mac">here</a>.</p>
<a class="header" href="print.html#gpio-pins" id="gpio-pins"><h2>GPIO pins</h2></a>
<p>One powerful feature of the Raspberry Pi is the row of GPIO pins along the top edge of the board. GPIO stands for General-Purpose Input/Output. These pins are a physical interface between the Raspberry Pi and the outside world. At the simplest level, you can think of them as switches that you can turn on or off (input) or that the Pi can turn on or off (output).</p>
<p>The GPIO pins allow the Raspberry Pi to control and monitor the outside world by being connected to electronic circuits. The Pi is able to control LEDs, turning them on or off, run motors, and many other things. It's also able to detect whether a switch has been pressed, the temperature, and light. We refer to this as physical computing.</p>
<p>There are 40 pins on the Raspberry Pi (26 pins on early models), and they provide various different functions.</p>
<p>If you have a RasPiO pin label, it can help to identify what each pin is used for. Make sure your pin label is placed with the keyring hole facing the USB ports, pointed outwards.</p>
<p><img src="images/raspio-ports.jpg" alt="" /></p>
<p>If you don't have a pin label, then this guide can help you to identify the pin numbers:</p>
<p><img src="images/pinout.png" alt="" /></p>
<p>You'll see pins labelled as 3V3, 5V, GND and GP2, GP3, etc:</p>
<table><thead><tr><th>   </th><th>   </th><th>   </th></tr></thead><tbody>
<tr><td> 3V3 </td><td> 3.3 volts </td><td> Anything connected to these pins will always get 3.3V of power </td></tr>
<tr><td> 5V </td><td> 5 volts </td><td> Anything connected to these pins will always get 5V of power </td></tr>
<tr><td> GND </td><td> ground </td><td> Zero volts, used to complete a circuit </td></tr>
<tr><td> GP2 </td><td> GPIO pin 2 </td><td> These pins are for general-purpose use and can be configured as input or output pins </td></tr>
<tr><td> ID_SC/ID_SD/DNC </td><td> Special purpose pins </td></tr>
<tr></tr>
</tbody></table>
<p><strong>WARNING</strong>: If you follow the instructions, then playing about with the GPIO pins is safe and fun. Randomly plugging wires and power sources into your Pi, however, may destroy it, especially if using the 5V pins. Bad things can also happen if you try to connect things to your Pi that use a lot of power; LEDs are fine, motors are not. If you're worried about this, then you might want to consider using an add-on board such as the <a href="https://shop.pimoroni.com/products/explorer-hat">Explorer HAT</a> until you're confident enough to use the GPIO directly.</p>
<a class="header" href="print.html#lighting-an-led" id="lighting-an-led"><h2>Lighting an LED</h2></a>
<p>LEDs are delicate little things. If you put too much current through them they will pop (sometimes quite spectacularly). To limit the current going through the LED, you should always use a resistor in series with it.</p>
<p>Try connecting the long leg of an LED to the Pi's 3V3 and the short leg to a GND pin. The resistor can be anything over about 50Ω.</p>
<p><img src="images/led-3v3.png" alt="" /></p>
<p>The LED should light up. It will always be on, because it's connected to a 3V3 pin, which is itself always on.</p>
<p>Now try moving it from 3V3 to GPIO pin 17:</p>
<p><img src="images/led-gpio17.png" alt="" /></p>
<p>The LED should now turn off, but now it's on a GPIO pin, and can therefore be controlled by code.</p>
<a class="header" href="print.html#switching-an-led-on-and-off" id="switching-an-led-on-and-off"><h2>Switching an LED on and off</h2></a>
<blockquote>
<p><a href="https://gpiozero.readthedocs.io/">GPIO Zero</a> is a new Python library which provides a simple interface to everyday GPIO components. It comes installed by default in Raspbian.</p>
</blockquote>
<blockquote>
<p><a href="https://docs.rs/rust_gpiozero/0.1.0/rust_gpiozero/"><code>rust_gpizero</code></a> is a Rust implementation of the GPIO Zero library. It provides a simple interface to GPIO devices on the Raspberry Pi and is ideal for getting started with physical computing using Rust.</p>
</blockquote>
<ul>
<li>Create a project called <code>led</code> with Cargo</li>
</ul>
<pre><code class="language-bash">    cargo new led --bin
</code></pre>
<p>This creates a new binary executable called <code>step5</code>.
The <strong>step5</strong> directory has the following structure:</p>
<pre><code class="language-bash">step5
├── Cargo.toml
└── src
    └── main.rs    

</code></pre>
<!-- <div>
<asciinema-player src="asciinemas/185959.json" cols="81" rows="20"></asciinema-player>
</div> -->
<ul>
<li>You can switch an LED on and off by writing a program. Open the <code>main.rs</code> file in the <code>step5/src/</code> directory using your preferred editor with the following:</li>
</ul>
<pre><pre class="playpen"><code class="language-rust">extern crate rust_gpiozero;
use rust_gpiozero::*;

fn main() {

// Tell the Pi which GPIO pin you are using
let mut led = LED::new(17);

// Make the led switch on
led.on();
}
</code></pre></pre>
<p>Save the changes you made to the <code>main.rs</code> file and exit the editor.</p>
<ul>
<li>From your project directory, build your project by entering the following commands:</li>
</ul>
<pre><code class="language-bash">cargo check
</code></pre>
<ul>
<li>
<p>This will check if your program is able to compile.</p>
</li>
<li>
<p>To make the LED switch on, we need to actually compile the project and run it. Run the following command:</p>
</li>
</ul>
<pre><code class="language-bash">cargo run
</code></pre>
<ul>
<li>
<p>Your LED should switch on.</p>
</li>
<li>
<p>To make it switch off you can edit the <code>src/main.rs</code> again to the following:</p>
</li>
</ul>
<pre><pre class="playpen"><code class="language-rust">extern crate rust_gpiozero;
use rust_gpiozero::*;

fn main() {

// Tell the Pi which GPIO pin you are using
let mut led = LED::new(17);

// Make the led switch off
led.off();
}
</code></pre></pre>
<ul>
<li>
<p>Run the command <code>cargo run</code> again. Your LED should switch off.</p>
</li>
<li>
<p>But that's not all you can do.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if (getComputedStyle(document.querySelector(".fa")).fontFamily !== "FontAwesome") {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = '_FontAwesome/css/font-awesome.css';
                document.head.insertBefore(link, document.head.firstChild)
            }
        </script>

        

        

        

        
        <script src="searchindex.js" type="text/javascript" charset="utf-8"></script>
        
        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                window.print();
            })
        </script>
        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        
        <script type="text/javascript" src="asciinema-player.js"></script>
        

    </body>
</html>
